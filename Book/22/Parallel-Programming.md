# ูุตู ุจุณุช ู ุฏูู:  ุจุฑูุงููโููุณ ููุงุฒ (Parallel Programming)

ุฏุฑ ุงู ูุตูุ ูุง ุจู **APIูุง** ู ุณุงุฎุชุงุฑูุง ฺูุฏูุฎ (multithreading) ูโูพุฑุฏุงุฒู ฺฉู ุจุง ูุฏู ุจูุฑูโุจุฑุฏุงุฑ ุงุฒ ูพุฑุฏุงุฒูุฏูโูุง ฺูุฏโูุณุชูโุง ุทุฑุงุญ ุดุฏูโุงูุฏ:

* **Parallel LINQ (PLINQ)**
* **ฺฉูุงุณ Parallel**
* **ุณุงุฎุชุงุฑูุง task parallelism**
* **ูุฌููุนูโูุง concurrent**

ุงู ุณุงุฎุชุงุฑูุง ุฏุฑ ูุฌููุน (ุจูโุตูุฑุช ุบุฑุฑุณู) ุจุง ุนููุงู **Parallel Framework (PFX)** ุดูุงุฎุชู ูโุดููุฏ.
ฺฉูุงุณ **Parallel** ููุฑุงู ุจุง ุณุงุฎุชุงุฑูุง **task parallelism** ุชุญุช ุนููุงู **Task Parallel Library (TPL)** ูุงูุฏู ูโุดููุฏ.

ูพุด ุงุฒ ูุทุงูุนูโ ุงู ูุตูุ ูุงุฒู ุงุณุช ุจุง ููุงูู ูพุงูโุง ุฏุฑ ูุตู ฑด ุขุดูุง ุจุงุดุฏโุจูโูฺู **locking**ุ **ุงูู ูุฎโูุง (thread safety)** ู ฺฉูุงุณ **Task**.

๐ง ุนูุงูู ุจุฑ ุงูโูุงุ .NET ูุฌููุนูโุง ุงุฒ APIูุง ุชุฎุตุต ุฏฺฏุฑ ุฑุง ุจุฑุง ฺฉูฺฉ ุจู ุจุฑูุงููโููุณ ููุงุฒ ู ูุงููฺฏุงู ุงุฑุงุฆู ูโุฏูุฏ:

* **System.Threading.Channels.Channel** โ ฺฉ ุตู ุชููุฏฺฉููุฏู/ูุตุฑูโฺฉููุฏู ูุงููฺฏุงู ุจุง ฺฉุงุฑุง ุจุงูุงุ ฺฉู ุฏุฑ **.NET Core 3** ูุนุฑู ุดุฏ.
* **Microsoft Dataflow** (ุฏุฑ ูุถุง ูุงู System.Threading.Tasks.Dataflow) โ ฺฉ API ูพุดุฑูุชู ุจุฑุง ุงุฌุงุฏ ุดุจฺฉูโุง ุงุฒ ุจููฺฉโูุง ุจุงูุฑ ุดุฏู (buffered blocks) ฺฉู ุนููุงุช ุง ุชุจุฏู ุฏุงุฏูโูุง ุฑุง ุจูโุตูุฑุช ููุงุฒ ุงุฌุฑุง ูโฺฉููุฏ ู ุดุจุงูุช ุฒุงุฏ ุจู ุจุฑูุงููโููุณ actor/agent ุฏุงุฑูุฏ.
* **Reactive Extensions** โ ูพุงุฏูโุณุงุฒ LINQ ุฑู **IObservable** (ุฌุงฺฏุฒู ุจุฑุง **IAsyncEnumerable**) ฺฉู ุฏุฑ ุชุฑฺฉุจ ุฌุฑุงูโูุง ูุงููฺฏุงู ุจุณุงุฑ ูุฏุฑุชููุฏ ุงุณุช. ุงู ูุงุจูุช ุงุฒ ุทุฑู ุจุณุชูโ **System.Reactive NuGet** ุนุฑุถู ูโุดูุฏ.

---

## ฺุฑุง PFXุ ๐ค

ุฏุฑ ฑต ุณุงู ฺฏุฐุดุชูุ ุณุงุฒูุฏฺฏุงู CPU ุงุฒ ูพุฑุฏุงุฒูุฏูโูุง ุชฺฉโูุณุชูโุง ุจู ฺูุฏโูุณุชูโุง ููุงุฌุฑุช ฺฉุฑุฏูโุงูุฏ. ุงู ููุถูุน ุจุฑุง ูุง ุจุฑูุงููโููุณุงู ูุดฺฉูโุณุงุฒ ุงุณุชุ ุฒุฑุง ฺฉุฏูุง ุชฺฉโูุฎ ุจูโุทูุฑ ุฎูุฏฺฉุงุฑ ุงุฒ ูุณุชูโูุง ุจุดุชุฑ ุณุฑุนโุชุฑ ุงุฌุฑุง ููโุดููุฏ.

ุงุณุชูุงุฏู ุงุฒ ฺูุฏโูุณุชู ุฏุฑ ุจุณุงุฑ ุงุฒ ุจุฑูุงููโูุง ุณูุช ุณุฑูุฑ ุณุงุฏู ุงุณุชุ ฺูู ูุฑ ูุฎ ูโุชูุงูุฏ ฺฉ ุฏุฑุฎูุงุณุช ูุดุชุฑ ุฌุฏุงฺฏุงูู ุฑุง ุจูโุทูุฑ ูุณุชูู ูพุฑุฏุงุฒุด ฺฉูุฏ. ุงูุง ุฑู ุฏุณฺฉุชุงูพ ุงู ููุถูุน ุฏุดูุงุฑุชุฑ ุงุณุชุ ฺูู ูุนูููุงู ูุงุฒ ุฏุงุฑุฏ ฺฉุฏ ุฑุง ฺฉู ูุญุงุณุจุงุช ุณูฺฏู ุฏุงุฑุฏ ุจู ุงู ุตูุฑุช ุชุบุฑ ุฏูุฏ:

1. ุชูุณู ุขู ุจู ูุทุนูโูุง ฺฉูฺฺฉโุชุฑ.
2. ุงุฌุฑุง ุงู ูุทุนูโูุง ุจูโุตูุฑุช ููุงุฒ ุจุง ฺูุฏูุฎ.
3. ุฌูุนโุขูุฑ ูุชุงุฌ ุฏุฑ ุฒูุงู ฺฉู ุขูุงุฏู ูโุดููุฏุ ุจู ุดฺฉู **ุงูู ุงุฒ ูุธุฑ ูุฎโูุง** ู ฺฉุงุฑุง.

ุงูุจุชู ุงูุฌุงู ูููโ ุงู ูุฑุงุญู ุจุง ุณุงุฎุชุงุฑูุง ฺฉูุงุณฺฉ ฺูุฏูุฎ ููฺฉู ุงุณุชุ ุงูุง ุฏุณุชโููพุงฺฏุฑ ุงุณุชโุจูโุฎุตูุต ูุฑุงุญู ุชูุณูโุจูุฏ ู ุฌูุนโุขูุฑ ูุชุงุฌ. ูุดฺฉู ุฏฺฏุฑ ุงู ุงุณุช ฺฉู ุงุณุชุฑุงุชฺ ุฑุงุฌ **locking ุจุฑุง ุงูู ูุฎโูุง**ุ ููฺฏุงู ฺฉุงุฑ ููโุฒูุงู ฺูุฏ ูุฎ ุฑู ุฏุงุฏูโูุง ูุดุชุฑฺฉุ ุจุงุนุซ ุงุฌุงุฏ ุฑูุงุจุช (contention) ุฒุงุฏ ูโุดูุฏ.

ฺฉุชุงุจุฎุงููโูุง **PFX** ุฏููุงู ุจุฑุง ุญู ุงู ุณูุงุฑููุง ุทุฑุงุญ ุดุฏูโุงูุฏ.

---

## ููุงูู PFX ๐งฉ

ุจุฑูุงููโููุณ ุจุฑุง ุจูุฑูโุจุฑุฏุงุฑ ุงุฒ ฺูุฏโูุณุชู ุง ฺูุฏ ูพุฑุฏุงุฒูุฏูุ **parallel programming** ูุงู ุฏุงุฑุฏ. ุงู ููุถูุน ฺฉ ุฒุฑูุฌููุนู ุงุฒ ููููู ฺฏุณุชุฑุฏูโุชุฑ **multithreading** ุงุณุช.

ุฏู ุงุณุชุฑุงุชฺ ุงุตู ุจุฑุง ุชูุณู ฺฉุงุฑ ุจู ูุฎโูุง ูุฌูุฏ ุฏุงุฑุฏ:

* **Data Parallelism (ููุงุฒโุณุงุฒ ุฏุงุฏูโูุง)**
* **Task Parallelism (ููุงุฒโุณุงุฒ ูุธุงู)**

๐น ุฏุฑ **data parallelism**ุ ููุช ูุฌููุนูโุง ุงุฒ ูุธุงู ุจุงุฏ ุฑู ุฏุงุฏูโูุง ุฒุงุฏ ุงุฌุฑุง ุดููุฏุ ูุฑ ูุฎ ููุงู ูุฌููุนู ูุธุงู ุฑุง ุฑู ุจุฎุด ุงุฒ ุฏุงุฏูโูุง ุงุฌุฑุง ูโฺฉูุฏ. ุฏุฑ ูุงูุน ุฏุงุฏูโูุง ุจู ูุฎโูุง ุชูุณู ูโุดููุฏ.

๐น ุฏุฑ **task parallelism**ุ ูุง ูุธุงู ุฑุง ุชูุณู ูโฺฉููุ ุจู ุงู ูุนูุง ฺฉู ูุฑ ูุฎ ูุธููโุง ูุชูุงูุช ุฑุง ุงุฌุฑุง ูโฺฉูุฏ.

ุจูโุทูุฑ ฺฉูุ **data parallelism** ุณุงุฏูโุชุฑ ุงุณุช ู ุฑู ุณุฎุชโุงูุฒุงุฑูุง ุจุง ูุงุจูุช ููุงุฒโุณุงุฒ ุจุงูุง ุจูุชุฑ ููุงุณโูพุฐุฑ ุงุณุชุ ุฒุฑุง ุฏุงุฏูโูุง ูุดุชุฑฺฉ ุฑุง ฺฉุงูุด ูโุฏูุฏ ุง ุญุฐู ูโฺฉูุฏ (ุฏุฑ ูุชุฌู ูุดฺฉูุงุช ุฑูุงุจุช ู ุงูู ูุฎโูุง ูุฒ ฺฉูุชุฑ ูโุดูุฏ). ุนูุงููโุจุฑ ุงูุ ูุนูููุงู ุฏุงุฏูโูุง ุจุด ุงุฒ ูุธุงู ุฌุฏุงฺฏุงูู ูุณุชูุฏุ ู ุงู ุงูุฑ ูพุชุงูุณู ููุงุฒโุณุงุฒ ุฑุง ุงูุฒุงุด ูโุฏูุฏ.

**Data parallelism** ููฺูู ุฒูููโุณุงุฒ **structured parallelism** ุงุณุชุ ุจู ุงู ูุนูุง ฺฉู ฺฉุงุฑูุง ููุงุฒ ุฏุฑ ฺฉ ููุทู ุงุฒ ุจุฑูุงูู ุดุฑูุน ู ุฏุฑ ููุงูโุฌุง ูุฒ ูพุงุงู ูโุงุจูุฏ. ุฏุฑ ููุงุจูุ **task parallelism** ูุนูููุงู **unstructured** ุงุณุชุ ุนู ฺฉุงุฑูุง ููุงุฒ ููฺฉู ุงุณุช ุฏุฑ ุจุฎุดโูุง ูพุฑุงฺฉูุฏูโุง ุงุฒ ุจุฑูุงูู ุดุฑูุน ู ูพุงุงู ุงุจูุฏ.

๐ **Structured parallelism** ุณุงุฏูโุชุฑุ ฺฉูโุฎุทุงุชุฑุ ู ุงูฺฉุงู ูุงฺฏุฐุงุฑ ฺฉุงุฑูุง ุฏุดูุงุฑ ูุงููุฏ ุชูุณูโุจูุฏุ ููุงููฺฏ ูุฎโูุง ู ุญุช ุฌูุนโุขูุฑ ูุชุงุฌ ุฑุง ุจู ฺฉุชุงุจุฎุงููโูุง ูุฑุงูู ูโฺฉูุฏ.

---

## ุงุฌุฒุง PFX ๐๏ธ

ฺฉุชุงุจุฎุงููโ **PFX** ุงุฒ ุฏู ูุงูโ ุงุตู ุชุดฺฉู ุดุฏู ุงุณุช (ูุทุงุจู ุดฺฉู 22-1):

* **ูุงู ุจุงูุงุชุฑ** โ ุดุงูู ุฏู API ุจุฑุง data parallelism ุณุงุฎุชุงุฑุงูุชู:

  * **PLINQ**
  * **ฺฉูุงุณ Parallel**

* **ูุงู ูพุงูโุชุฑ** โ ุดุงูู ฺฉูุงุณโูุง task parallelism ุจูโุนูุงูู ูุฌููุนูโุง ุงุฒ ุณุงุฎุชุงุฑูุง ฺฉูฺฉ ุจุฑุง ูุนุงูุชโูุง ุจุฑูุงููโููุณ ููุงุฒ.

 <div align="center">
    
![Conventions-UsedThis-Book](../../assets/image/22/Table-22-1.jpeg) 
</div>

### PLINQ โจ

**PLINQ** ุบูโุชุฑู ูุงุจูุชโูุง ุฑุง ุงุฑุงุฆู ูโุฏูุฏ: ุงู ุงุจุฒุงุฑ ุชูุงู ูุฑุงุญู ููุงุฒโุณุงุฒ ุฑุง ุจูโุทูุฑ ุฎูุฏฺฉุงุฑ ุงูุฌุงู ูโุฏูุฏโุงุฒ ุฌููู:

* ุชูุณู ฺฉุงุฑ ุจู ูุธุงู (tasks)
* ุงุฌุฑุง ุงู ูุธุงู ุฑู ูุฎโูุง (threads)
* ุฌูุนโุขูุฑ ูุชุงุฌ ุฏุฑ ฺฉ ุชูุงู ุฎุฑูุฌ ูุงุญุฏ

ุจู ููู ุฏูู ุขู ุฑุง **Declarative** ูโูุงููุฏโฺูู ุดูุง ููุท ุงุนูุงู ูโฺฉูุฏ ฺฉู ูโุฎูุงูุฏ ฺฉุงุฑุชุงู ููุงุฒโุณุงุฒ ุดูุฏ (ุจูโุตูุฑุช ฺฉ ูพุฑุณโูโุฌู LINQ ุณุงุฎุชุงุฑุจูุฏโุดุฏู) ู ุฎูุฏู **runtime** ุฌุฒุฆุงุช ูพุงุฏูโุณุงุฒ ุฑุง ูุฏุฑุช ูโฺฉูุฏ.

ุฏุฑ ููุงุจูุ ุฑูฺฉุฑุฏูุง ุฏฺฏุฑ **Imperative** ูุณุชูุฏุ ุนู ุดูุง ุจุงุฏ ุจูโุทูุฑ ุตุฑุญ ฺฉุฏ ุจููุณุฏ ุชุง ฺฉุงุฑ ุฑุง ุชูุณู ุง ูุชุงุฌ ุฑุง ุฌูุนโุขูุฑ ฺฉูุฏ.

ููุงูโุทูุฑ ฺฉู ุฎูุงุตูโ ุฒุฑ ูุดุงู ูโุฏูุฏ:

* ุฏุฑ ููุฑุฏ **ฺฉูุงุณ Parallel** โ ุดูุง ุจุงุฏ ูุชุงุฌ ุฑุง ุฎูุฏุชุงู ุฌูุนโุขูุฑ ฺฉูุฏ.
* ุฏุฑ ููุฑุฏ **ุณุงุฎุชุงุฑูุง task parallelism** โ ุดูุง ุจุงุฏ ุนูุงูู ุจุฑ ุฌูุนโุขูุฑ ูุชุงุฌุ ุชูุณู ฺฉุงุฑ ุฑุง ูุฒ ุฎูุฏุชุงู ุงูุฌุงู ุฏูุฏ.

 <div align="center">
    
![Conventions-UsedThis-Book](../../assets/image/22/Table-22-2.jpeg) 
</div>

### ูุฌููุนูโูุง Concurrent ู Spinning Primitives โ๏ธ

**ูุฌููุนูโูุง concurrent** ู **spinning primitives** ุจู ุดูุง ุฏุฑ ูุนุงูุชโูุง ุณุทุญ ูพุงูโุชุฑ ุจุฑูุงููโููุณ ููุงุฒ ฺฉูฺฉ ูโฺฉููุฏ. ุงููุช ุงู ุงุจุฒุงุฑูุง ุงุฒ ุขูุฌุงุณุช ฺฉู **PFX** ููโุชููุง ุจุฑุง ุณุฎุชโุงูุฒุงุฑ ุงูุฑูุฒ ุจูฺฉู ุจุฑุง ูุณูโูุง ุขูุฏูโ ูพุฑุฏุงุฒูุฏูโูุง ุจุง ุชุนุฏุงุฏ ูุณุชูโูุง ุจุณุงุฑ ุจุดุชุฑ ุทุฑุงุญ ุดุฏู ุงุณุช.

ูุฑุถ ฺฉูุฏ ุจุงุฏ ฺฉ ุชูุฏู ฺูุจ ุฎุฑุฏุดุฏู ุฑุง ุฌุงุจูโุฌุง ฺฉูุฏ ู ณฒ ฺฉุงุฑฺฏุฑ ุฏุฑ ุงุฎุชุงุฑ ุฏุงุฑุฏุ ุจุฒุฑฺฏโุชุฑู ฺุงูุด ุงู ุงุณุช ฺฉู ฺฉุงุฑฺฏุฑุงู ุจุฏูู ูุฒุงุญูุช ุจุฑุง ฺฉุฏฺฏุฑ ุจุชูุงููุฏ ฺฉุงุฑ ฺฉููุฏ. ุฏููุง ููู ููุถูุน ุฏุฑ ุชูุณู ฺฉ ุงูฺฏูุฑุชู ุจู ณฒ ูุณุชู ุฑุฎ ูโุฏูุฏ: ุงฺฏุฑ ุงุฒ **lockูุง ูุนููู** ุจุฑุง ูุญุงูุธุช ุงุฒ ููุงุจุน ูุดุชุฑฺฉ ุงุณุชูุงุฏู ุดูุฏุ ููู ุดุฏูโูุง (blocking) ุจุงุนุซ ูโุดููุฏ ุชููุง ุจุฎุด ุงุฒ ูุณุชูโูุง ูุงูุนุงู ูุนุงู ุจุงุดูุฏ.

๐ ูุฌููุนูโูุง concurrent ุจูโุทูุฑ ุฎุงุต ุจุฑุง ุฏุณุชุฑุณโูุง ุจุณุงุฑ ููโุฒูุงู ุชูุธู ุดุฏูโุงูุฏุ ุจุง ุชูุฑฺฉุฒ ุจุฑ **ุญุฏุงููโุณุงุฒ ุง ุญุฐู ููู ุดุฏู**.
ฺฉูุงุณ **Parallel** ู ููฺูู **PLINQ** ุฎูุฏุดุงู ุจุฑุง ูุฏุฑุช ฺฉุงุฑ ุจูโุตูุฑุช ฺฉุงุฑุขูุฏุ ูุชฺฉ ุจุฑ ููู ูุฌููุนูโูุง ู **spinning primitives** ูุณุชูุฏ.

---

## ฺฉุงุฑุจุฑุฏูุง ุฏฺฏุฑ PFX ๐๏ธ

ุณุงุฎุชุงุฑูุง ุจุฑูุงููโููุณ ููุงุฒ ุชููุง ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ฺูุฏโูุณุชู ูุณุชูุฏุ ุจูฺฉู ุฏุฑ ุณูุงุฑููุง ุฏฺฏุฑ ูู ููุฏ ูุงูุน ูโุดููุฏ:

* ููุช ุจู ฺฉ **queue**ุ **stack** ุง **dictionary** ุงูู ุงุฒ ูุธุฑ ูุฎโูุง (thread-safe) ูุงุฒ ุฏุงุฑุฏ.
* **BlockingCollection** ุฑุงู ุณุงุฏู ุจุฑุง ูพุงุฏูโุณุงุฒ ุณุงุฎุชุงุฑูุง ุชููุฏฺฉููุฏู/ูุตุฑูโฺฉููุฏู ูุฑุงูู ูโฺฉูุฏ ู ููฺูู ุฑูุด ููุงุณุจ ุจุฑุง ูุญุฏูุฏุณุงุฒ ููโุฒูุงู ุงุณุช.
* **Tasks** ูพุงูโ ุงุตู ุจุฑูุงููโููุณ ูุงููฺฏุงู ูุณุชูุฏ (ููุงูโุทูุฑ ฺฉู ุฏุฑ ูุตู ฑด ุฏุฏู).

---

## ฺู ุฒูุงู ุจุงุฏ ุงุฒ PFX ุงุณุชูุงุฏู ฺฉุฑุฏุ โฑ๏ธ

ููุฑุฏ ุงุตู ุงุณุชูุงุฏู ุงุฒ **PFX**ุ **ุจุฑูุงููโููุณ ููุงุฒ** ุงุณุช: ุนู ุจูุฑูโุจุฑุฏุงุฑ ุงุฒ ฺูุฏโูุณุชู ุจุฑุง ุณุฑุนุชโุจุฎุดุฏู ุจู ฺฉุฏูุง ูุญุงุณุจุงุช ุณูฺฏู.

ฺฉ ุงุฒ ฺุงูุดโูุง ููู ุฏุฑ ุจุฑูุงููโููุณ ููุงุฒุ **ูุงููู Amdahl** ุงุณุช. ุงู ูุงููู ูโฺฏูุฏ ุจุดุชุฑู ุจูุจูุฏ ฺฉุงุฑุง ุงุฒ ููุงุฒโุณุงุฒุ ุชูุณุท ุจุฎุด ุงุฒ ฺฉุฏ ฺฉู ุจุงุฏ ุจูโุตูุฑุช ุชุฑุชุจ (sequential) ุงุฌุฑุง ุดูุฏ ูุญุฏูุฏ ูโฺฏุฑุฏุฏ.

๐ ูุซุงู: ุงฺฏุฑ ุชููุง ุฏูุณูู ุฒูุงู ุงุฌุฑุง ฺฉ ุงูฺฏูุฑุชู ูุงุจู ููุงุฒโุณุงุฒ ุจุงุดุฏุ ุญุช ุจุง ุจโููุงุช ูุณุชู ููโุชูุงูุฏ ุจุด ุงุฒ ุณู ุจุฑุงุจุฑ ุงูุฒุงุด ฺฉุงุฑุง ุฏุงุดุชู ุจุงุดุฏ.

ุจูุงุจุฑุงูุ ูพุด ุงุฒ ุงุฏุงูู ุจุงุฏ ูุทูุฆู ุดูุฏ ฺฉู ฺฏููฺฏุงู ูุงูุนุงู ุฏุฑ ุจุฎุด ุงุฒ ฺฉุฏ ุงุณุช ฺฉู ูุงุจูุช ููุงุฒโุณุงุฒ ุฏุงุฑุฏ. ููฺูู ุจุงุฏ ุจุฑุฑุณ ฺฉูุฏ ฺฉู ุขุง ุงุตูุงู ฺฉุฏ ุดูุง ูุงุฒ ุจู ูุญุงุณุจุงุช ุณูฺฏู ุฏุงุฑุฏ ุง ุฎุฑโุฒุฑุง **ุจูููโุณุงุฒ** ุงุบูุจ ุณุงุฏูโุชุฑู ู ูุคุซุฑุชุฑู ุฑุงูฺฉุงุฑ ุงุณุช.
ุงูุจุชู ุงู ููุถูุน ฺฉ ูุนุงููู ุฏุงุฑุฏุ ฺูู ุจุฑุฎ ุฑูุดโูุง ุจูููโุณุงุฒ ูโุชูุงููุฏ ููุงุฒโุณุงุฒ ฺฉุฏ ุฑุง ุณุฎุชโุชุฑ ฺฉููุฏ.

ุจุดุชุฑู ุณูุฏ ุฏุฑ ููุงุฑุฏ ุจูโุฏุณุช ูโุขุฏ ฺฉู ุจู ุขูโูุง **embarrassingly parallel problems** ูโฺฏููุฏโุนู ุฒูุงู ฺฉู ฺฉ ฺฉุงุฑ ุจูโุฑุงุญุช ูโุชูุงูุฏ ุจู ูุธุงู ุฌุฏุงฺฏุงูู ุชูุณู ุดูุฏ ู ูุฑฺฉุฏุงู ุจูโุทูุฑ ูุณุชูู ู ฺฉุงุฑุขูุฏ ุงุฌุฑุง ุดููุฏ.

๐ท ูููููโูุง:

* ุจุณุงุฑ ุงุฒ ูุธุงู ูพุฑุฏุงุฒุด ุชุตูุฑ
* ray tracing
* ุฑูุดโูุง brute-force ุฏุฑ ุฑุงุถุงุช ุง ุฑูุฒูฺฏุงุฑ

ูููููโ ฺฉ **ูุดฺฉู ุบุฑ embarrassingly parallel**ุ ูพุงุฏูโุณุงุฒ ฺฉ ูุณุฎูโ ุจููู ุงุฒ ุงูฺฏูุฑุชู **quicksort** ุงุณุชโฺฉู ุจุฑุง ุฑุณุฏู ุจู ูุชุฌู ุฎูุจ ูุงุฒููุฏ ูฺฉุฑ ุจุดุชุฑ ุงุณุช ู ุดุงุฏ ุจู **unstructured parallelism** ูุงุฒ ุฏุงุดุชู ุจุงุดุฏ.

---

## PLINQ โก

**PLINQ** ูพุฑุณโูโุฌููุง LINQ ูุญู ุฑุง ุจูโุทูุฑ ุฎูุฏฺฉุงุฑ ููุงุฒโุณุงุฒ ูโฺฉูุฏ.
ูุฒุช ุจุฒุฑฺฏ ุขู ุงู ุงุณุช ฺฉู ุจุงุฑ ุชูุณู ฺฉุงุฑ ู ุฌูุนโุขูุฑ ูุชุงุฌ ุฑุง ุจูโุทูุฑ ฺฉุงูู ุจู **.NET** ูุงฺฏุฐุงุฑ ูโฺฉูุฏ.

ุจุฑุง ุงุณุชูุงุฏู ุงุฒ PLINQุ ฺฉุงูุณุช ุฑู ุชูุงู ูุฑูุฏุ ูุชุฏ **AsParallel()** ุฑุง ูุฑุงุฎูุงู ฺฉุฑุฏู ู ุณูพุณ ูพุฑุณโูุฌู LINQ ุฑุง ูุซู ููุดู ุงุฏุงูู ุฏูุฏ.

ูููููโ ุฒุฑ ุนุฏุฏูุง ุงูู ุจู ณ ุชุง ฑฐฐ,ฐฐฐ ุฑุง ุจุง ุงุณุชูุงุฏู ฺฉุงูู ุงุฒ ุชูุงู ูุณุชูโูุง ูุงุดู ูุญุงุณุจู ูโฺฉูุฏ:

```csharp
// ูุญุงุณุจู ุงุนุฏุงุฏ ุงูู ุจุง ฺฉ ุงูฺฏูุฑุชู ุณุงุฏู (ุบุฑุจููู).
IEnumerable<int> numbers = Enumerable.Range (3, 100000 - 3);

var parallelQuery =
    from n in numbers.AsParallel()
    where Enumerable.Range (2, (int) Math.Sqrt(n)).All (i => n % i > 0)
    select n;

int[] primes = parallelQuery.ToArray();
```

๐ ูุชุฏ **AsParallel** ฺฉ **extension method** ุฏุฑ **System.Linq.ParallelEnumerable** ุงุณุช. ุงู ูุชุฏ ูุฑูุฏ ุฑุง ุฏุฑ ฺฉ ุชูุงู ุจุฑ ูพุงูโ **ParallelQuery<TSource>** ูโูพฺุฏ. ููู ููุถูุน ุจุงุนุซ ูโุดูุฏ ุนููฺฏุฑูุง ูพุฑุณโูุฌู LINQ ฺฉู ุฏุฑ ุงุฏุงูู ูุฑุงุฎูุงู ูโฺฉูุฏุ ุจู ูุฌููุนูโุง ุฌุงฺฏุฒู ุงุฒ ูุชุฏูุง ุชูุณุนูโุงูุชู ุฏุฑ **ParallelEnumerable** ูุชุตู ุดููุฏ.

ุงู ูุชุฏูุง ูพุงุฏูโุณุงุฒโูุง ููุงุฒ ุงุฒ ูุฑ ฺฉ ุงุฒ ุนููฺฏุฑูุง ุงุณุชุงูุฏุงุฑุฏ ูพุฑุณโูุฌู ุฑุง ูุฑุงูู ูโฺฉููุฏ. ุงุณุงุณ ฺฉุงุฑ ุขูโูุง ุงู ุงุณุช ฺฉู ุชูุงู ูุฑูุฏ ุฑุง ุจู ุจุฎุดโูุง ุชูุณู ูโฺฉููุฏ ุชุง ุฑู ูุฎโูุง ูุฎุชูู ุงุฌุฑุง ุดููุฏ ู ุณูพุณ ูุชุงุฌ ุฑุง ุฏูุจุงุฑู ุฏุฑ ฺฉ ุชูุงู ุฎุฑูุฌ ูุงุญุฏ ฺฏุฑุฏุขูุฑ ฺฉููุฏ (ูุทุงุจู ุดฺฉู 22-2).

