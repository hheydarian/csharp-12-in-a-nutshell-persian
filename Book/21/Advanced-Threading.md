# ูุตู ุจุณุช ู ฺฉู:  Threading ูพุดุฑูุชู 

ูุง ุฏุฑ **ูุตู ฑด** ุจุง ูุจุงู ุงูููโ **Threading** ุดุฑูุน ฺฉุฑุฏู ุชุง ููุฏููโุง ุจุฑุง **Tasks** ู **Asynchrony** ุจุงุดุฏ. ุจู ุทูุฑ ูุดุฎุตุ ูุดุงู ุฏุงุฏู ฺุทูุฑ ูโุชูุงู ฺฉ **Thread** ุฑุง ุดุฑูุน ู ูพฺฉุฑุจูุฏ ฺฉุฑุฏ ู ููุงูู ุงุณุงุณ ูุซู **Thread Pooling**ุ **Blocking**ุ **Spinning** ู **Synchronization Contexts** ุฑุง ูพูุดุด ุฏุงุฏู. ููฺูู ุจู **Locking** ู **Thread Safety** ูพุฑุฏุงุฎุชู ู ุณุงุฏูโุชุฑู ุณุงุฒูโ ุณฺฏูุงูโุฏูุ ุนู **ManualResetEvent** ุฑุง ูุนุฑู ฺฉุฑุฏู.

ุงู ูุตู ุฏููุงู ุงุฒ ููุงูโุฌุง ุงุฏุงูู ูพุฏุง ูโฺฉูุฏ ฺฉู ูุตู ฑด ุฏุฑ ููุถูุน **Threading** ูุชููู ุดุฏ. ุฏุฑ ุณู ุจุฎุด ุงููุ ุจูโุทูุฑ ุนููโุชุฑ ุจู **Synchronization**ุ **Locking** ู **Thread Safety** ูโูพุฑุฏุงุฒู. ุณูพุณ ููุงุฑุฏ ุฒุฑ ุฑุง ูพูุดุด ูโุฏูู:

* ๐ **Nonexclusive locking** (ูุงููุฏ **Semaphore** ู **Reader/Writer Locks**)
* ๐ ูููโ ุณุงุฒูโูุง ุณฺฏูุงูโุฏู (**AutoResetEvent**ุ **ManualResetEvent**ุ **CountdownEvent** ู **Barrier**)
* ๐ข **Lazy Initialization** (ุจุง ุงุณุชูุงุฏู ุงุฒ **Lazy<T>** ู **LazyInitializer**)
* ๐งฉ **Thread-local storage** (ูุงููุฏ **ThreadStaticAttribute**ุ **ThreadLocal<T>** ู **GetData/SetData**)
* โฑ **Timers**

ููุถูุน **Threading** ุขูโูุฏุฑ ูุณุน ุงุณุช ฺฉู ูุง ุจุฎุดโูุง ุชฺฉูู ุฑุง ุจูโุตูุฑุช ุขููุงู ูุฑุงุฑ ุฏุงุฏูโุงู ุชุง ุชุตูุฑ ฺฉุงููโุชุฑ ุงุฑุงุฆู ุดูุฏ. ุจุฑุง ูุทุงูุนูโ ููุถูุนุงุช ูพุดุฑูุชูโุชุฑุ ุจู ูุจโุณุงุช ุฒุฑ ูุฑุงุฌุนู ฺฉูุฏ:

๐ [http://albahari.com/threading](http://albahari.com/threading)

ุฏุฑ ุขูโุฌุง ูุจุงุญุซ ุฒุฑ ุฑุง ุฎูุงูุฏ ุงูุช:

* โ๏ธ **Monitor.Wait** ู **Monitor.Pulse** ุจุฑุง ุณูุงุฑููุง ุฎุงุต ุณฺฏูุงูโุฏู
* ๐ ุชฺฉูฺฉโูุง **Nonblocking Synchronization** ุจุฑุง **Micro-Optimization** (ูุงููุฏ **Interlocked**ุ **Memory Barriers**ุ **volatile**)
* ๐ **SpinLock** ู **SpinWait** ุจุฑุง ุณูุงุฑููุง ุจุง **Concurrency** ุจุงูุง

---

## ๐ Synchronization Overview (ูุฑูุฑ Synchronization)

**Synchronization** ุนู ููุงููฺฏโุณุงุฒ ุนููุงุช ููุฒูุงู ุจุฑุง ุฏุณุชุงุจ ุจู ฺฉ ูุชุฌูโ ูุงุจู ูพุดโุจู. ุงู ููุถูุน ุจูโูฺู ููุช ุงููุช ูพุฏุง ูโฺฉูุฏ ฺฉู ฺูุฏู **Thread** ุจู ุฏุงุฏูโ ูุดุชุฑฺฉ ุฏุณุชุฑุณ ุฏุงุฑูุฏุ ุฏุฑ ุงู ุดุฑุงุทุ ุฎู ุฑุงุญุช ูโุชูุงู ุฏฺุงุฑ ูุดฺฉู ุดุฏ.

ุณุงุฏูโุชุฑู ู ฺฉุงุฑุจุฑุฏโุชุฑู ุงุจุฒุงุฑูุง **Synchronization** ุงุญุชูุงูุงู ููุงู **Continuations** ู **Task Combinators** ูุณุชูุฏ ฺฉู ุฏุฑ ูุตู ฑด ุชูุถุญ ุฏุงุฏู. ุจุง ูุฑูููู ฺฉุฑุฏู ุจุฑูุงููโูุง ููุฒูุงู ุฏุฑ ูุงูุจ ุนููุงุช **Asynchronous** ฺฉู ุจุง **Continuations** ู **Combinators** ุจู ูู ูุชุตู ูโุดููุฏุ ูุงุฒ ุจู **Locking** ู **Signaling** ฺฉูุชุฑ ูโุดูุฏ. ุจุง ุงู ุญุงูุ ูููุฒ ููุงูุน ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ุณุงุฒูโูุง ุณุทุญ ูพุงูโุชุฑ ูุงุฑุฏ ุนูู ูโุดููุฏ.

ุณุงุฒูโูุง **Synchronization** ุฑุง ูโุชูุงู ุจู ุณู ุฏุณุชู ุชูุณู ฺฉุฑุฏ:

1. ๐ **Exclusive Locking**
   ุงู ุณุงุฒูโูุง ุงุฌุงุฒู ูโุฏููุฏ ููุท ฺฉ **Thread** ุฏุฑ ูุฑ ูุญุธู ูุนุงูุช ุฎุงุต ุงูุฌุงู ุฏูุฏ ุง ุจุฎุด ุงุฒ ฺฉุฏ ุฑุง ุงุฌุฑุง ฺฉูุฏ. ูุฏู ุงุตู ุขูโูุง ุงู ุงุณุช ฺฉู **Threads** ุจุชูุงููุฏ ุจู ูุถุนุช ูุดุชุฑฺฉ ุฏุฑ ุญุงู ููุดุชู ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดูุฏ ุจุฏูู ุงูโฺฉู ูุฒุงุญู ูู ุดููุฏ. ุณุงุฒูโูุง **Exclusive Locking** ุนุจุงุฑุชโุงูุฏ ุงุฒ:
   **lock**ุ **Mutex** ู **SpinLock**.

2. ๐ **Nonexclusive Locking**
   ุงู ููุน **Locking** ุจู ุดูุง ุงุฌุงุฒู ูโุฏูุฏ ูุฒุงู **Concurrency** ุฑุง ูุญุฏูุฏ ฺฉูุฏ. ุณุงุฒูโูุง ุขู ุนุจุงุฑุชโุงูุฏ ุงุฒ:
   **Semaphore(Slim)** ู **ReaderWriterLock(Slim)**.

3. ๐ข **Signaling**
   ุงู ุณุงุฒูโูุง ุจู ฺฉ **Thread** ุงุฌุงุฒู ูโุฏููุฏ ุชุง ุฒูุงู ฺฉู ุงุฒ ฺฉ ุง ฺูุฏ **Thread** ุฏฺฏุฑ ุงุทูุงุน (Notification) ุฏุฑุงูุช ูฺฉุฑุฏูุ ุฏุฑ ุญุงูุช **Block** ุจุงู ุจูุงูุฏ. ุณุงุฒูโูุง **Signaling** ุดุงูู **ManualResetEvent(Slim)**ุ **AutoResetEvent**ุ **CountdownEvent** ู **Barrier** ูุณุชูุฏ. ุณู ููุฑุฏ ุงูู ูุนูููุงู ุจุง ุนููุงู **Event Wait Handles** ุดูุงุฎุชู ูโุดููุฏ.

ููฺูู ุงูฺฉุงู (ู ุงูุจุชู ุฏุดูุงุฑ) ุงูุฌุงู ุจุฑุฎ ุนููุงุช ููุฒูุงู ุฑู ุฏุงุฏูโ ูุดุชุฑฺฉ ุจุฏูู ุงุณุชูุงุฏู ุงุฒ **Locking** ูุฌูุฏ ุฏุงุฑุฏุ ุจุง ฺฉูฺฉ ุณุงุฒูโูุง **Nonblocking Synchronization**. ุงู ุณุงุฒูโูุง ุนุจุงุฑุชโุงูุฏ ุงุฒ:
**Thread.MemoryBarrier**ุ **Thread.VolatileRead**ุ **Thread.VolatileWrite**ุ ฺฉูุฏูุงฺูโ **volatile** ู ฺฉูุงุณ **Interlocked**.

ูุง ุงู ููุถูุน ุฑุง ุจู ููุฑุงู ูุชุฏูุง **Monitor.Wait/Pulse** ฺฉู ุจุฑุง ููุดุชู ููุทู ุณูุงุฑุด ุณฺฏูุงูโุฏู ฺฉุงุฑุจุฑุฏ ุฏุงุฑูุฏุ ุจูโุตูุฑุช ุขููุงู ูพูุดุด ุฏุงุฏูโุงู.

---

## ๐ Exclusive Locking (ูููโฺฏุฐุงุฑ ุงูุญุตุงุฑ)

ุณู ุณุงุฒูโ ุงุตู ุจุฑุง **Exclusive Locking** ูุฌูุฏ ุฏุงุฑุฏ: ุฏุณุชูุฑ **lock**ุ **Mutex** ู **SpinLock**.

* ุฏุณุชูุฑ **lock** ุฑุงุญุชโุชุฑู ู ูพุฑฺฉุงุฑุจุฑุฏุชุฑู ฺฏุฒูู ุงุณุช.
* **Mutex** ุฒูุงู ุงุณุชูุงุฏู ูโุดูุฏ ฺฉู ุจุฎูุงูุฏ ููู ุฑุง ุจู ฺูุฏู **Process** ฺฏุณุชุฑุด ุฏูุฏ (ูููโูุง ุณุทุญ ฺฉุงููพูุชุฑ).
* **SpinLock** ฺฉ **Micro-Optimization** ุงุณุช ฺฉู ูโุชูุงูุฏ ุฏุฑ ุณูุงุฑููุง ุจุง **Concurrency** ุจุงูุง ุจุงุนุซ ฺฉุงูุด **Context Switches** ุดูุฏ. ๐

